<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title></title>
    <link rel="stylesheet" href="css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link href="css/custom.css?v=13" rel="stylesheet" />
    <link href="css/font/css/all.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="mx-auto order-0">
            <a class="navbar-brand mx-auto" href="index.html">RadicalSAM.org</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavItems" aria-controls="navbarNavItems" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse w-100 order-3" id="navbarNavItems">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a class="nav-link active" href="explore.html?v=2.1">Explore</a></li>
                <!--                <li class="nav-item"><a class="nav-link" href="explore.html?v=2.0">Explore 2.0</a></li>-->
                <!--                <li class="nav-item"><a class="nav-link" href="explore.html?v=1.0">Explore 1.0</a></li>-->
                <li class="nav-item"><a class="nav-link" href="search.html">Search</a></li>
                <li class="nav-item"><a class="nav-link" href="submit.html">Submit</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <main role="main">
        <div class="container">
            <nav aria-label="breadcrumb" id="exploreBreadcrumb" style="display: none;">
            </nav>
            <div class="container">
                <h1 class="text-center" id="familyTitle"></h1>
                <div>
                    <div id="clusterNums" class="w-100 container-cluster-num pl-2 pr-2"></div>
                    <div>
                        <div class="border border-dark rounded p-2 mb-2 float-right w-100">
                            <img src="img/blank.png" class="img-fluid" id="clusterImg" />
                        </div>
                    </div>
                    <div style="clear:both"></div>
                    <div>
                        <div class="float-right download-btn" data-toggle="tooltip" title="Download high-resolution" id="downloadClusterImage">PNG <i class="fas fa-download"></i></div>
                        <div class="data-available float-left" id="dataAvailable" style="display: none">
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailableSp">Swiss-Prot</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailableKegg">KEGG</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailablePdb">PDB</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailableTigr">TIGR</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailablePubs">Pubs</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailableAnno">Anno</button>
                            <button class="btn btn-outline-secondary disabled" type="button" id="dataAvailableSunburst">Taxonomy</button>
                        </div>
                        <div style="clear:both"></div>
                        <div id="clusterSizeContainer" style="display: none">
                            <div id="clusterSize" class="cluster-size">Number of IDs: </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="alert alert-danger" role="alert" id="loadError" style="display: none"></div>
            <p class="text-center" id="clusterDesc">
            </p>

            <div id="dicingInfo" style="display: none" class="dicing-info">
                This cluster was diced.  TODO: put some description here??
            </div>

            <!--
            <div id="contentTabsDiv">
-->
            <div id="altSsn" style="display: none">
                <h3 class="explore-heading">Additional Alignment Score Segregations</h3>
                <div id="altSsnPrimary" style="display: none">
                    <p>
                    This page displays the SSN of <span class="alt-cluster-id">Megacluster</span>
                    generated with an alignment score of <span class="alt-cluster-default-as">N</span>
                    that collects all of the sequences into a single cluster.
                    Links are provided to Color SSNs generated with increasing alignments scores
                    (<span class="alt-cluster-ascores"></span>).
                    As the alignment score increases, <span class="alt-cluster-id">Megacluster</span>
                    segregates into an 
                    increasing number of smaller clusters.   In some of these clusters, "fine structure" is 
                    revealed that shows the emergence of subclusters.  The connected subclusters may have 
                    similar functions.  As the alignment score is increased, the subclusters emerge as distinct 
                    clusters that may be isofunctional.  
                    </p>
    
                    <p>
                    On the Search page, the "Find by UniProt ID" and "Find by Sequence" functions can be used to 
                    identify the clusters in the Color SSNs containing an ID/sequence of interest.  Analyses of 
                    these clusters may allow the identification of isofunctional clusters (large alignment 
                    score) and their relationships to other isofunctional clusters (connected subclusters at 
                    smaller alignment scores).  The UniRef50 ID/FASTA files for the clusters can be used with 
                    EFI-GNT to view the genome neighborhood diagrams (GNDs) of clusters, providing information 
                    about functional heterogeneity.
                    </p>
                </div>
                <div id="altSsnSecondary" style="display: none">
                    <p>
                    The SSN image was generated with the Color SSN function of the "Cluster Analysis" utility.  
                    The clusters are numbered and assigned a unique color in order of decreasing number of 
                    UniProt IDs.  The Color SSNs generated with increasing alignment scores are colored 
                    independently, so clusters in different Color SSNs with the same color need not be related.
                    </p>

                    <p>
                    The tabs provide several types of information generated with the "Cluster Analysis" utility:  
                    </p>

                    <p>
                    The <span class="link-dl">DATA FILE DOWNLOAD</span> tab provides the Color SSN along with folders with lists of IDs and 
                    FASTA sequences for all clusters in the SSN.   
                    </p>

                    <p>
                    The <span class="link-dl">WEBLOGOS</span> tab provides the WebLogo and MSA for each cluster with &ge;3 nodes (UniRef50 IDs).  
                    </p>

                    <p>
                    The <span class="link-dl">CONSENSUS CYS RESIDUES</span> tab provides the positions of conserved Cys residues for each 
                    cluster with &ge;3 nodes (UniRef50 IDs).  
                    </p>

                    <p>
                    The <span class="link-dl">HMMS</span> tab provides the HMM for each cluster with &ge;3 nodes (UniRef50 IDs).  
                    </p>

                    <p>
                    The <span class="link-dl">LENGTH HISTOGRAMS</span> tab provides length histograms for the UniProt and UniRef50 IDs for 
                    each cluster with &ge;3 nodes (UniRef50 IDs).  
                    </p>

                    <p>
                    The cluster numbers in the tabs are links to the Explore page for the cluster that provides 
                    information/downloads for the cluster.
                    </p>
                </div>
            </div>
            <div id="childTabs" style="display: none">
                <ul class="nav nav-tabs nav-intro-tabs" id="childTabsHdr" role="tablist">
                    <li class="nav-item"><a href="#childDownload"   id="tab-child-download" class="nav-link active" data-toggle="tab" role="tab" aria-controls="download"  aria-selected="false">Data File Download</a></li>
                    <li class="nav-item"><a href="#childLogo"       id="tab-child-logo"     class="nav-link" data-toggle="tab" role="tab" aria-controls="logo"      aria-selected="false">WebLogos</a></li>
                    <li class="nav-item" id="childConsResListItem"><a href="#childConsRes"    id="tab-child-cons-res" class="nav-link" data-toggle="tab" role="tab" aria-controls="cons-res"  aria-selected="false">Consensus Cys Residues</a></li>
                    <li class="nav-item"><a href="#childHmm"        id="tab-child-hmm"      class="nav-link" data-toggle="tab" role="tab" aria-controls="hmm"       aria-selected="false">HMMs</a></li>
                    <li class="nav-item"><a href="#childHisto"      id="tab-child-histo"    class="nav-link" data-toggle="tab" role="tab" aria-controls="histo"     aria-selected="false">Length Histograms</a></li>
                </ul>
                <div class="tab-content" id="childTabContent">
                    <div class="tab-pane fade child-tab-pane show active"  id="childDownload"  role="tabpanel" aria-labelledby="tab-child-download">
                    </div>
                    <div class="tab-pane fade child-tab-pane show"         id="childLogo"      role="tabpanel" aria-labelledby="tab-child-logo">
                    </div>
                    <div class="tab-pane fade child-tab-pane show"         id="childConsRes"   role="tabpanel" aria-labelledby="tab-child-cons-res" style="min-height: 500px">
                    </div>
                    <div class="tab-pane fade child-tab-pane show"         id="childHmm"       role="tabpanel" aria-labelledby="tab-child-hmm">
                    </div>
                    <div class="tab-pane fade child-tab-pane show"         id="childHisto"     role="tabpanel" aria-labelledby="tab-child-histo">
                    </div>
                </div>
            </div>
            <div id="subgroupTable" style="display: none">
                <h3 class="explore-heading">Sub-clusters (Segregated Into Higher Alignment Scores)</h3>
            </div>
            <div id="displayFeatures" style="display: none">
                <div id="summaryInfoContainer">
                    <!--<div id="derivationContainerBottom">
                        <b>DERIVATION:</b> IPR007197+IPR006638 // AS##,
                        edge-edited<span data-toggle="tooltip" title="Edge editing is done to ensure that clusters with very low connectivity to other parts of the network are isolated." style="font-size: 0.8em;"><sup><i class="fas fa-question-circle"></i></sup></span>
                        and isolated // AS##,
                        edge-edited<span data-toggle="tooltip" title="Edge editing is done to ensure that clusters with very low connectivity to other parts of the network are isolated." style="font-size: 0.8em;"><sup><i class="fas fa-question-circle"></i></sup></span>
                        and isolated // HMM developed from isofunctional cluster
                    </div>-->
                    <!--
                    <div id="spFunctionContainer" style="display: none">
                        <h3>Swiss-Prot Functions</h3>
                        <div id="spFunctions"></div>
                    </div>
                    -->
                </div>
                <h3 class="explore-heading">Length Histograms and WebLogo</h3>
                <div class="row">
                    <div id="lengthHistogramContainer" class="col" style="display: none">
                    </div>
                    <div id="weblogoContainer" class="col" style="display: none">
                        <h5>WebLogo</h5>
                        <div class="float-right download-btn" data-toggle="tooltip" title="Download high-resolution" id="downloadWeblogoImage">PNG <i class="fas fa-download"></i></div>
                        <div id="weblogo"></div>
                    </div>
                </div>
            </div>

            <div id="downloadContainer" style="display: none">
                <h3 class="explore-heading">Downloads</h3>
                <div id="downloads"></div>
            </div>

            <div id="metadataContainer" style="display: none">
                <div id="otherAnnoContainer">
                    <h3>Public Annotation Databases</h3>
                </div>

                <div id="commAnno">
                    <h3>Community Annotations</h3>
                    <div id="noCommAnno">
                        <p>
                        No community annotations are available for this cluster.  
                        </p>
                        <p>
                        We are accepting <a href="submit.html" id="submitAnnoLink">submissions for community-driven annotations</a>.
                        </p>
                    </div>
                    <div id="commAnnoTable"></div>
                </div>

                <div id="publicationsContainer">
                    <h3>Publications</h3>
                    <div id="publications">
                        No publications are available for this cluster.  Please contact us to contribute a
                        citation to this page.
                    </div>
                </div>

                <div id="familyListContainer">
                    <div id="tigrfamContainer">
                        <h3>TIGR Families</h3>
                        <div id="tigrFams"></div>
                    </div>
                </div>
            </div>
        </div> <!-- /container -->

    </main>

    <footer class="container">
        <hr class="w-25" />
        <div class="text-center">
            radicalSAM.org <span class="pl-4"></span> Gerlt, Mitchell, Firouzbakht, and Oberg, 2020 <span class="pl-4"></span> <a href="https://efi.igb.illinois.edu">EFI</a> at <a href="https://igb.illinois.edu">Institute for Genomic Biology, University of Illinois</a>
        </div>
    </footer>
    <script src="js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
    <script src="js/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!--<script src="data/data.js?v=15"></script>-->
    <script src="js/network.js?v=8"></script>
    <script src="js/progress.js?v=2"></script>
    <script src="js/app.js?v=30"></script>
    <script src="js/imageMapResizer.min.js"></script>
    <script src="js/jquery.maphilight.min.js"></script>
    <script src="js/jquery.lazy.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            var progress = new Progress($("#progressLoader"));
            progress.start();

            initApp("2.1");
            $('.lazy').Lazy();
    
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
    <div id="keggIdModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">KEGG IDs in Cluster</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div id="keggIdList" class="modal-colwrap-3">
                    </div>
                    <textarea id="keggIdListClip" style="display: none"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default mr-auto copy-btn" data-clipboard-target="keggIdListClip" data-id="keggIdListClip">Copy <i class="far fa-copy"></i></button>
                    <button type="button" class="btn btn-default btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="tigrListModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">TIGR Families in Cluster</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div id="tigrList">
                    </div>
                    <textarea id="tigrListClip" style="display: none"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default mr-auto copy-btn" data-clipboard-target="tigrListClip" data-id="tigrListClip">Copy <i class="far fa-copy"></i></button>
                    <button type="button" class="btn btn-default btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="spModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">SwissProt Functions in Cluster</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <p>Click the SwissProt function to see associated UniProt IDs.</p>
                    <div id="spFunctions">
                    </div>
                    <textarea id="spModalIdListClip" style="display: none"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default mr-auto copy-btn" data-id="spModalIdListClip">Copy <i class="far fa-copy"></i></button>
                    <button type="button" class="btn btn-default btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="pdbModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">PDB Entries in Cluster</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div id="pdbIdList">
                    </div>
                    <textarea id="pdbIdListClip" style="display: none"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default mr-auto copy-btn" data-id="pdbIdListClip">Copy <i class="far fa-copy"></i></button>
                    <button type="button" class="btn btn-default btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="sunburstModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Species in Cluster</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body text-center modal-sunburst" id="sunburstChartContainer">
                    <div id="sunburstChart">
                    </div>
                    <div id="sunburstIdNums" class="cluster-size cluster-size-sm float-right">
                    </div>
                    <div style="clear: both">
                        Click on a region to zoom into that part of the taxonomic hierarchy.  Clicking on the
                        center circle will zoom out to the next highest level.
                    </div>
<!--
                    <div>
                        <canvas id="sunburstPngCanvas" width="600" height="600"></canvas>
                    </div>
-->
                </div>
                <div class="modal-footer">
                    <div class="mr-auto">
                        <div class="p-2" data-toggle="tooltip" title="By default the full set of UniProt IDs is downloaded. By selecting this option, only the UniRef50 IDs will be downloaded.">
                            ID type: 
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="sunburstIdType" id="sunburstIdTypeUniProt" value="uniprot" checked>
                                <label class="form-check-label" for="sunburstIdTypeUniProt">UniProt</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="sunburstIdType" id="sunburstIdTypeUniRef50" value="uniref50">
                                <label class="form-check-label" for="sunburstIdTypeUniRef50">UniRef50</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="sunburstIdType" id="sunburstIdTypeUniRef90" value="uniref90">
                                <label class="form-check-label" for="sunburstIdTypeUniRef90">UniRef90</label>
                            </div>
<!--
                            <select class="form-control w-50" data-toggle="tooltip" title="By default the full set of UniProt IDs is downloaded. By selecting this option, only the UniRef50 IDs will be downloaded.">
                                <option value="uniprot" selected>UniProt (default)</option>
                                <option value="uniref50">UniRef50</option>
                                <option value="uniref90">UniRef90</option>
                            </select>
-->
                        </div>
                        <div>
                            <button type="button" class="btn btn-default btn-secondary" data-toggle="tooltip" title="Download the UniProt IDs that are visible in the sunburst diagram" id="sunburstDlIds">Prepare ID Download</button>
                            <button type="button" class="btn btn-default btn-secondary mr-auto" data-toggle="tooltip" title="Download the FASTA sequences that are visible in the sunburst diagram" id="sunburstDlFasta">Prepare FASTA Download</button>
                            <!--<button type="button" class="btn btn-default mr-auto" data-toggle="tooltip" title="Download a SVG file of the sunburst diagram" id="sunburstSvg">Download SVG</button>-->
                        </div>
                    </div>
                    <div class="mt-auto">
                        <button type="button" class="btn btn-default btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
            <div id="sunburstProgressLoader" class="progress-loader" style="display: none">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
        </div>
    </div>
    <div id="sunburstDownloadModal" class="modal fade" tabindex="-1" role="dialog" style="margin-top: 200px">
        <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <h5 style="display: none">Preparing Download</h5>
                    <button type="button" class="btn btn-primary" id="sbDownloadBtn"><a href="" id="sbDownloadLink">Download List</a></button><br><br>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
            <div id="downloadProgressLoader" class="progress-loader progress-loader-sm" style="display: none">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
        </div>
    </div>
    <div id="progressLoader" class="progress-loader" style="display: none">
        <i class="fas fa-spinner fa-spin"></i>
    </div>
    <script src="js/sunburst/sunburst-chart.min.js"></script>
    <script src="js/sunburst/circlepack-chart.min.js"></script>
    <script src="js/sunburst/sunburst_helpers.js"></script>
</body>
</html>
